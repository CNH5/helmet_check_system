{% extends "monitor/base.html" %}

{% block title %}
    <title>添加监控</title>
{% endblock %}

{% block breadcrumbs %}
    <ul class="breadcrumbs pull-left">
        <li><span>监控添加</span></li>
    </ul>
{% endblock %}

{% block style %}
    {{ block.super }}
    <link rel="stylesheet" href="{% static "monitor/create/create.css" %}">
{% endblock %}

{% block main-content %}
    <div class="main-content-inner d-flex py-4 flex-grow-1">
        <div class="card flex-grow-1 d-flex">
            <div class="card-body d-flex">
                <!-- monitor create form start -->
                <form class="form-create-monitor py-3 px-2" novalidate>
                    <div class="mb-3">
                        <label class="form-label" for="monitor-name">
                            <span class="h6 fw-bold">监控名</span>
                        </label>
                        <input type="text" id="monitor-name" class="form-control" required
                               placeholder="1~20个字" maxlength="20" name="name">
                        <div class="invalid-feedback">
                            <span class="fs-6">请填写监控名</span>
                        </div>
                    </div>
                    <div class="mb-3">
                        <label class="form-label" for="monitor-source">
                            <span class="h6 fw-bold">监控源</span>
                        </label>
                        <textarea type="text" id="monitor-source" class="form-control" required
                                  placeholder="支持设备id、RTSP、 RTMP、 HTTP" name="source"></textarea>
                        <div class="invalid-feedback">
                            <span class="fs-6">请填写监控源</span>
                        </div>
                    </div>
                    <div class="mb-4">
                        <label class="form-label" for="helmet-detect">
                            <span class="h6 fw-bold">安全帽佩戴检测</span>
                        </label>
                        <select id="helmet-detect" class="form-select" name="helmet-detect">
                            <option value="true" selected>开启</option>
                            <option value="false">关闭</option>
                        </select>
                    </div>
                    <div class="d-flex">
                        <button type="reset" class="btn btn-secondary btn-sm ms-auto">清空</button>
                        <button type="submit" class="btn btn-primary btn-sm ms-3">提交</button>
                    </div>
                    {% csrf_token %}
                </form>
                <!-- monitor create form end -->
                <!-- source review area start -->
                <div class="source-review-area d-flex ps-3">
                    <div class="w-100" style="margin-top: 7%">
                        <div id="source-img-wrap" class="shadow-none bg-body-tertiary mb-3 d-flex my-auto"></div>
                    </div>
                </div>
                <!-- source review area end -->
            </div>
        </div>
    </div>
{% endblock %}

{% block script %}
    {{ block.super }}
    <script>
        let monitorInsertURL = "{% url 'monitor:insert' %}"
        let newSourceTestURL = "{% url 'monitor:new-source-test' %}"
        let reviewSourceURL = "{% url 'monitor:new-source-review' %}"
    </script>
    <script src="{% static 'monitor/create/create.js' %}"></script>
{% endblock %}